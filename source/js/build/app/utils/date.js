define(['module'], function (module) {
  'use strict';

  /* Modified from https://github.com/taylorhakes/fecha
   *
   * The MIT License (MIT)
   *
   * Copyright (c) 2015 Taylor Hakes
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   *     The above copyright notice and this permission notice shall be included in all
   * copies or substantial portions of the Software.
   *
   *     THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   *     FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   *     OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   * SOFTWARE.
   */

  /*eslint-disable*/
  // 把 YYYY-MM-DD 改成了 yyyy-MM-dd
  (function (main) {
    'use strict';

    /**
     * Parse or format dates
     * @class fecha
     */

    var fecha = {};
    var token = /d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g;
    var twoDigits = /\d\d?/;
    var threeDigits = /\d{3}/;
    var fourDigits = /\d{4}/;
    var word = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;
    var noop = function noop() {};

    function shorten(arr, sLen) {
      var newArr = [];
      for (var i = 0, len = arr.length; i < len; i++) {
        newArr.push(arr[i].substr(0, sLen));
      }
      return newArr;
    }

    function monthUpdate(arrName) {
      return function (d, v, i18n) {
        var index = i18n[arrName].indexOf(v.charAt(0).toUpperCase() + v.substr(1).toLowerCase());
        if (~index) {
          d.month = index;
        }
      };
    }

    function pad(val, len) {
      val = String(val);
      len = len || 2;
      while (val.length < len) {
        val = '0' + val;
      }
      return val;
    }

    var dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
    var monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
    var monthNamesShort = shorten(monthNames, 3);
    var dayNamesShort = shorten(dayNames, 3);
    fecha.i18n = {
      dayNamesShort: dayNamesShort,
      dayNames: dayNames,
      monthNamesShort: monthNamesShort,
      monthNames: monthNames,
      amPm: ['am', 'pm'],
      DoFn: function DoFn(D) {
        return D + ['th', 'st', 'nd', 'rd'][D % 10 > 3 ? 0 : (D - D % 10 !== 10) * D % 10];
      }
    };

    var formatFlags = {
      D: function D(dateObj) {
        return dateObj.getDay();
      },
      DD: function DD(dateObj) {
        return pad(dateObj.getDay());
      },
      Do: function Do(dateObj, i18n) {
        return i18n.DoFn(dateObj.getDate());
      },
      d: function d(dateObj) {
        return dateObj.getDate();
      },
      dd: function dd(dateObj) {
        return pad(dateObj.getDate());
      },
      ddd: function ddd(dateObj, i18n) {
        return i18n.dayNamesShort[dateObj.getDay()];
      },
      dddd: function dddd(dateObj, i18n) {
        return i18n.dayNames[dateObj.getDay()];
      },
      M: function M(dateObj) {
        return dateObj.getMonth() + 1;
      },
      MM: function MM(dateObj) {
        return pad(dateObj.getMonth() + 1);
      },
      MMM: function MMM(dateObj, i18n) {
        return i18n.monthNamesShort[dateObj.getMonth()];
      },
      MMMM: function MMMM(dateObj, i18n) {
        return i18n.monthNames[dateObj.getMonth()];
      },
      yy: function yy(dateObj) {
        return String(dateObj.getFullYear()).substr(2);
      },
      yyyy: function yyyy(dateObj) {
        return dateObj.getFullYear();
      },
      h: function h(dateObj) {
        return dateObj.getHours() % 12 || 12;
      },
      hh: function hh(dateObj) {
        return pad(dateObj.getHours() % 12 || 12);
      },
      H: function H(dateObj) {
        return dateObj.getHours();
      },
      HH: function HH(dateObj) {
        return pad(dateObj.getHours());
      },
      m: function m(dateObj) {
        return dateObj.getMinutes();
      },
      mm: function mm(dateObj) {
        return pad(dateObj.getMinutes());
      },
      s: function s(dateObj) {
        return dateObj.getSeconds();
      },
      ss: function ss(dateObj) {
        return pad(dateObj.getSeconds());
      },
      S: function S(dateObj) {
        return Math.round(dateObj.getMilliseconds() / 100);
      },
      SS: function SS(dateObj) {
        return pad(Math.round(dateObj.getMilliseconds() / 10), 2);
      },
      SSS: function SSS(dateObj) {
        return pad(dateObj.getMilliseconds(), 3);
      },
      a: function a(dateObj, i18n) {
        return dateObj.getHours() < 12 ? i18n.amPm[0] : i18n.amPm[1];
      },
      A: function A(dateObj, i18n) {
        return dateObj.getHours() < 12 ? i18n.amPm[0].toUpperCase() : i18n.amPm[1].toUpperCase();
      },
      ZZ: function ZZ(dateObj) {
        var o = dateObj.getTimezoneOffset();
        return (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4);
      }
    };

    var parseFlags = {
      d: [twoDigits, function (d, v) {
        d.day = v;
      }],
      M: [twoDigits, function (d, v) {
        d.month = v - 1;
      }],
      yy: [twoDigits, function (d, v) {
        var da = new Date(),
            cent = +('' + da.getFullYear()).substr(0, 2);
        d.year = '' + (v > 68 ? cent - 1 : cent) + v;
      }],
      h: [twoDigits, function (d, v) {
        d.hour = v;
      }],
      m: [twoDigits, function (d, v) {
        d.minute = v;
      }],
      s: [twoDigits, function (d, v) {
        d.second = v;
      }],
      yyyy: [fourDigits, function (d, v) {
        d.year = v;
      }],
      S: [/\d/, function (d, v) {
        d.millisecond = v * 100;
      }],
      SS: [/\d{2}/, function (d, v) {
        d.millisecond = v * 10;
      }],
      SSS: [threeDigits, function (d, v) {
        d.millisecond = v;
      }],
      D: [twoDigits, noop],
      ddd: [word, noop],
      MMM: [word, monthUpdate('monthNamesShort')],
      MMMM: [word, monthUpdate('monthNames')],
      a: [word, function (d, v, i18n) {
        var val = v.toLowerCase();
        if (val === i18n.amPm[0]) {
          d.isPm = false;
        } else if (val === i18n.amPm[1]) {
          d.isPm = true;
        }
      }],
      ZZ: [/[\+\-]\d\d:?\d\d/, function (d, v) {
        var parts = (v + '').match(/([\+\-]|\d\d)/gi),
            minutes;

        if (parts) {
          minutes = +(parts[1] * 60) + parseInt(parts[2], 10);
          d.timezoneOffset = parts[0] === '+' ? minutes : -minutes;
        }
      }]
    };
    parseFlags.DD = parseFlags.D;
    parseFlags.dddd = parseFlags.ddd;
    parseFlags.Do = parseFlags.dd = parseFlags.d;
    parseFlags.mm = parseFlags.m;
    parseFlags.hh = parseFlags.H = parseFlags.HH = parseFlags.h;
    parseFlags.MM = parseFlags.M;
    parseFlags.ss = parseFlags.s;
    parseFlags.A = parseFlags.a;

    // Some common format strings
    fecha.masks = {
      'default': 'ddd MMM dd yyyy HH:mm:ss',
      shortDate: 'M/D/yy',
      mediumDate: 'MMM d, yyyy',
      longDate: 'MMMM d, yyyy',
      fullDate: 'dddd, MMMM d, yyyy',
      shortTime: 'HH:mm',
      mediumTime: 'HH:mm:ss',
      longTime: 'HH:mm:ss.SSS'
    };

    /***
     * Format a date
     * @method format
     * @param {Date|number} dateObj
     * @param {string} mask Format of the date, i.e. 'mm-dd-yy' or 'shortDate'
     */
    fecha.format = function (dateObj, mask, i18nSettings) {
      var i18n = i18nSettings || fecha.i18n;

      if (typeof dateObj === 'number') {
        dateObj = new Date(dateObj);
      }

      if (Object.prototype.toString.call(dateObj) !== '[object Date]' || isNaN(dateObj.getTime())) {
        throw new Error('Invalid Date in fecha.format');
      }

      mask = fecha.masks[mask] || mask || fecha.masks['default'];

      return mask.replace(token, function ($0) {
        return $0 in formatFlags ? formatFlags[$0](dateObj, i18n) : $0.slice(1, $0.length - 1);
      });
    };

    /**
     * Parse a date string into an object, changes - into /
     * @method parse
     * @param {string} dateStr Date string
     * @param {string} format Date parse format
     * @returns {Date|boolean}
     */
    fecha.parse = function (dateStr, format, i18nSettings) {
      var i18n = i18nSettings || fecha.i18n;

      if (typeof format !== 'string') {
        throw new Error('Invalid format in fecha.parse');
      }

      format = fecha.masks[format] || format;

      // Avoid regular expression denial of service, fail early for really long strings
      // https://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS
      if (dateStr.length > 1000) {
        return false;
      }

      var isValid = true;
      var dateInfo = {};
      format.replace(token, function ($0) {
        if (parseFlags[$0]) {
          var info = parseFlags[$0];
          var index = dateStr.search(info[0]);
          if (!~index) {
            isValid = false;
          } else {
            dateStr.replace(info[0], function (result) {
              info[1](dateInfo, result, i18n);
              dateStr = dateStr.substr(index + result.length);
              return result;
            });
          }
        }

        return parseFlags[$0] ? '' : $0.slice(1, $0.length - 1);
      });

      if (!isValid) {
        return false;
      }

      var today = new Date();
      if (dateInfo.isPm === true && dateInfo.hour != null && +dateInfo.hour !== 12) {
        dateInfo.hour = +dateInfo.hour + 12;
      } else if (dateInfo.isPm === false && +dateInfo.hour === 12) {
        dateInfo.hour = 0;
      }

      var date;
      if (dateInfo.timezoneOffset != null) {
        dateInfo.minute = +(dateInfo.minute || 0) - +dateInfo.timezoneOffset;
        date = new Date(Date.UTC(dateInfo.year || today.getFullYear(), dateInfo.month || 0, dateInfo.day || 1, dateInfo.hour || 0, dateInfo.minute || 0, dateInfo.second || 0, dateInfo.millisecond || 0));
      } else {
        date = new Date(dateInfo.year || today.getFullYear(), dateInfo.month || 0, dateInfo.day || 1, dateInfo.hour || 0, dateInfo.minute || 0, dateInfo.second || 0, dateInfo.millisecond || 0);
      }
      return date;
    };

    /* istanbul ignore next */
    if (typeof module !== 'undefined' && module.exports) {
      module.exports = fecha;
    } else if (typeof define === 'function' && define.amd) {
      define(function () {
        return fecha;
      });
    } else {
      main.fecha = fecha;
    }
  })(undefined);
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC91dGlscy9kYXRlLmpzIl0sIm5hbWVzIjpbIm1haW4iLCJmZWNoYSIsInRva2VuIiwidHdvRGlnaXRzIiwidGhyZWVEaWdpdHMiLCJmb3VyRGlnaXRzIiwid29yZCIsIm5vb3AiLCJzaG9ydGVuIiwiYXJyIiwic0xlbiIsIm5ld0FyciIsImkiLCJsZW4iLCJsZW5ndGgiLCJwdXNoIiwic3Vic3RyIiwibW9udGhVcGRhdGUiLCJhcnJOYW1lIiwiZCIsInYiLCJpMThuIiwiaW5kZXgiLCJpbmRleE9mIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJ0b0xvd2VyQ2FzZSIsIm1vbnRoIiwicGFkIiwidmFsIiwiU3RyaW5nIiwiZGF5TmFtZXMiLCJtb250aE5hbWVzIiwibW9udGhOYW1lc1Nob3J0IiwiZGF5TmFtZXNTaG9ydCIsImFtUG0iLCJEb0ZuIiwiRCIsImZvcm1hdEZsYWdzIiwiZGF0ZU9iaiIsImdldERheSIsIkREIiwiRG8iLCJnZXREYXRlIiwiZGQiLCJkZGQiLCJkZGRkIiwiTSIsImdldE1vbnRoIiwiTU0iLCJNTU0iLCJNTU1NIiwieXkiLCJnZXRGdWxsWWVhciIsInl5eXkiLCJoIiwiZ2V0SG91cnMiLCJoaCIsIkgiLCJISCIsIm0iLCJnZXRNaW51dGVzIiwibW0iLCJzIiwiZ2V0U2Vjb25kcyIsInNzIiwiUyIsIk1hdGgiLCJyb3VuZCIsImdldE1pbGxpc2Vjb25kcyIsIlNTIiwiU1NTIiwiYSIsIkEiLCJaWiIsIm8iLCJnZXRUaW1lem9uZU9mZnNldCIsImZsb29yIiwiYWJzIiwicGFyc2VGbGFncyIsImRheSIsImRhIiwiRGF0ZSIsImNlbnQiLCJ5ZWFyIiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsIm1pbGxpc2Vjb25kIiwiaXNQbSIsInBhcnRzIiwibWF0Y2giLCJtaW51dGVzIiwicGFyc2VJbnQiLCJ0aW1lem9uZU9mZnNldCIsIm1hc2tzIiwic2hvcnREYXRlIiwibWVkaXVtRGF0ZSIsImxvbmdEYXRlIiwiZnVsbERhdGUiLCJzaG9ydFRpbWUiLCJtZWRpdW1UaW1lIiwibG9uZ1RpbWUiLCJmb3JtYXQiLCJtYXNrIiwiaTE4blNldHRpbmdzIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwiaXNOYU4iLCJnZXRUaW1lIiwiRXJyb3IiLCJyZXBsYWNlIiwiJDAiLCJzbGljZSIsInBhcnNlIiwiZGF0ZVN0ciIsImlzVmFsaWQiLCJkYXRlSW5mbyIsImluZm8iLCJzZWFyY2giLCJyZXN1bHQiLCJ0b2RheSIsImRhdGUiLCJVVEMiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmaW5lIiwiYW1kIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXlCQTtBQUNBO0FBQ0EsR0FBQyxVQUFVQSxJQUFWLEVBQWdCO0FBQ2Y7O0FBRUE7Ozs7O0FBSUEsUUFBSUMsUUFBUSxFQUFaO0FBQ0EsUUFBSUMsUUFBUSwwRUFBWjtBQUNBLFFBQUlDLFlBQVksT0FBaEI7QUFDQSxRQUFJQyxjQUFjLE9BQWxCO0FBQ0EsUUFBSUMsYUFBYSxPQUFqQjtBQUNBLFFBQUlDLE9BQU8sa0hBQVg7QUFDQSxRQUFJQyxPQUFPLFNBQVBBLElBQU8sR0FBWSxDQUN0QixDQUREOztBQUdBLGFBQVNDLE9BQVQsQ0FBaUJDLEdBQWpCLEVBQXNCQyxJQUF0QixFQUE0QjtBQUMxQixVQUFJQyxTQUFTLEVBQWI7QUFDQSxXQUFLLElBQUlDLElBQUksQ0FBUixFQUFXQyxNQUFNSixJQUFJSyxNQUExQixFQUFrQ0YsSUFBSUMsR0FBdEMsRUFBMkNELEdBQTNDLEVBQWdEO0FBQzlDRCxlQUFPSSxJQUFQLENBQVlOLElBQUlHLENBQUosRUFBT0ksTUFBUCxDQUFjLENBQWQsRUFBaUJOLElBQWpCLENBQVo7QUFDRDtBQUNELGFBQU9DLE1BQVA7QUFDRDs7QUFFRCxhQUFTTSxXQUFULENBQXFCQyxPQUFyQixFQUE4QjtBQUM1QixhQUFPLFVBQVVDLENBQVYsRUFBYUMsQ0FBYixFQUFnQkMsSUFBaEIsRUFBc0I7QUFDM0IsWUFB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QUFpQnVDLE1BQU10RSxXQUFOLEVBQTFCLEVBQStDa0UsU0FBUzVGLEtBQVQsSUFBa0IsQ0FBakUsRUFBb0U0RixTQUFTdkMsR0FBVCxJQUFnQixDQUFwRixFQUNMdUMsU0FBU2xDLElBQVQsSUFBaUIsQ0FEWixFQUNla0MsU0FBU2pDLE1BQVQsSUFBbUIsQ0FEbEMsRUFDcUNpQyxTQUFTaEMsTUFBVCxJQUFtQixDQUR4RCxFQUMyRGdDLFNBQVMvQixXQUFULElBQXdCLENBRG5GLENBQVA7QUFFRDtBQUNELGFBQU9vQyxJQUFQO0FBQ0QsS0F4REQ7O0FBMERBO0FBQ0EsUUFBSSxPQUFPRSxNQUFQLEtBQWtCLFdBQWxCLElBQWlDQSxPQUFPQyxPQUE1QyxFQUFxRDtBQUNuREQsYUFBT0MsT0FBUCxHQUFpQjlILEtBQWpCO0FBQ0QsS0FGRCxNQUVPLElBQUksT0FBTytILE1BQVAsS0FBa0IsVUFBbEIsSUFBZ0NBLE9BQU9DLEdBQTNDLEVBQWdEO0FBQ3JERCxhQUFPLFlBQVk7QUFDakIsZUFBTy9ILEtBQVA7QUFDRCxPQUZEO0FBR0QsS0FKTSxNQUlBO0FBQ0xELFdBQUtDLEtBQUwsR0FBYUEsS0FBYjtBQUNEO0FBQ0YsR0E1VEQiLCJmaWxlIjoiYXBwL3V0aWxzL2RhdGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBNb2RpZmllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS90YXlsb3JoYWtlcy9mZWNoYVxuICpcbiAqIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxNSBUYXlsb3IgSGFrZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4gKiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4gKiBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4gKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4gKiBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbiAqIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogICAgIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxuICogY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiAgICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiAgICAgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gKiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuICogICAgIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXG4gKiBTT0ZUV0FSRS5cbiAqL1xuXG4vKmVzbGludC1kaXNhYmxlKi9cbi8vIOaKiiBZWVlZLU1NLUREIOaUueaIkOS6hiB5eXl5LU1NLWRkXG4oZnVuY3Rpb24gKG1haW4pIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKlxuICAgKiBQYXJzZSBvciBmb3JtYXQgZGF0ZXNcbiAgICogQGNsYXNzIGZlY2hhXG4gICAqL1xuICB2YXIgZmVjaGEgPSB7fTtcbiAgdmFyIHRva2VuID0gL2R7MSw0fXxNezEsNH18eXkoPzp5eSk/fFN7MSwzfXxEb3xaWnwoW0hoTXNEbV0pXFwxP3xbYUFdfFwiW15cIl0qXCJ8J1teJ10qJy9nO1xuICB2YXIgdHdvRGlnaXRzID0gL1xcZFxcZD8vO1xuICB2YXIgdGhyZWVEaWdpdHMgPSAvXFxkezN9LztcbiAgdmFyIGZvdXJEaWdpdHMgPSAvXFxkezR9LztcbiAgdmFyIHdvcmQgPSAvWzAtOV0qWydhLXpcXHUwMEEwLVxcdTA1RkZcXHUwNzAwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdK3xbXFx1MDYwMC1cXHUwNkZGXFwvXSsoXFxzKj9bXFx1MDYwMC1cXHUwNkZGXSspezEsMn0vaTtcbiAgdmFyIG5vb3AgPSBmdW5jdGlvbiAoKSB7XG4gIH07XG5cbiAgZnVuY3Rpb24gc2hvcnRlbihhcnIsIHNMZW4pIHtcbiAgICB2YXIgbmV3QXJyID0gW107XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFyci5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgbmV3QXJyLnB1c2goYXJyW2ldLnN1YnN0cigwLCBzTGVuKSk7XG4gICAgfVxuICAgIHJldHVybiBuZXdBcnI7XG4gIH1cblxuICBmdW5jdGlvbiBtb250aFVwZGF0ZShhcnJOYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCB2LCBpMThuKSB7XG4gICAgICB2YXIgaW5kZXggPSBpMThuW2Fyck5hbWVdLmluZGV4T2Yodi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHYuc3Vic3RyKDEpLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgaWYgKH5pbmRleCkge1xuICAgICAgICBkLm1vbnRoID0gaW5kZXg7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhZCh2YWwsIGxlbikge1xuICAgIHZhbCA9IFN0cmluZyh2YWwpO1xuICAgIGxlbiA9IGxlbiB8fCAyO1xuICAgIHdoaWxlICh2YWwubGVuZ3RoIDwgbGVuKSB7XG4gICAgICB2YWwgPSAnMCcgKyB2YWw7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG4gIH1cblxuICB2YXIgZGF5TmFtZXMgPSBbJ1N1bmRheScsICdNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5J107XG4gIHZhciBtb250aE5hbWVzID0gWydKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ107XG4gIHZhciBtb250aE5hbWVzU2hvcnQgPSBzaG9ydGVuKG1vbnRoTmFtZXMsIDMpO1xuICB2YXIgZGF5TmFtZXNTaG9ydCA9IHNob3J0ZW4oZGF5TmFtZXMsIDMpO1xuICBmZWNoYS5pMThuID0ge1xuICAgIGRheU5hbWVzU2hvcnQ6IGRheU5hbWVzU2hvcnQsXG4gICAgZGF5TmFtZXM6IGRheU5hbWVzLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogbW9udGhOYW1lc1Nob3J0LFxuICAgIG1vbnRoTmFtZXM6IG1vbnRoTmFtZXMsXG4gICAgYW1QbTogWydhbScsICdwbSddLFxuICAgIERvRm46IGZ1bmN0aW9uIERvRm4oRCkge1xuICAgICAgcmV0dXJuIEQgKyBbJ3RoJywgJ3N0JywgJ25kJywgJ3JkJ11bRCAlIDEwID4gMyA/IDAgOiAoRCAtIEQgJSAxMCAhPT0gMTApICogRCAlIDEwXTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGZvcm1hdEZsYWdzID0ge1xuICAgIEQ6IGZ1bmN0aW9uKGRhdGVPYmopIHtcbiAgICAgIHJldHVybiBkYXRlT2JqLmdldERheSgpO1xuICAgIH0sXG4gICAgREQ6IGZ1bmN0aW9uKGRhdGVPYmopIHtcbiAgICAgIHJldHVybiBwYWQoZGF0ZU9iai5nZXREYXkoKSk7XG4gICAgfSxcbiAgICBEbzogZnVuY3Rpb24oZGF0ZU9iaiwgaTE4bikge1xuICAgICAgcmV0dXJuIGkxOG4uRG9GbihkYXRlT2JqLmdldERhdGUoKSk7XG4gICAgfSxcbiAgICBkOiBmdW5jdGlvbihkYXRlT2JqKSB7XG4gICAgICByZXR1cm4gZGF0ZU9iai5nZXREYXRlKCk7XG4gICAgfSxcbiAgICBkZDogZnVuY3Rpb24oZGF0ZU9iaikge1xuICAgICAgcmV0dXJuIHBhZChkYXRlT2JqLmdldERhdGUoKSk7XG4gICAgfSxcbiAgICBkZGQ6IGZ1bmN0aW9uKGRhdGVPYmosIGkxOG4pIHtcbiAgICAgIHJldHVybiBpMThuLmRheU5hbWVzU2hvcnRbZGF0ZU9iai5nZXREYXkoKV07XG4gICAgfSxcbiAgICBkZGRkOiBmdW5jdGlvbihkYXRlT2JqLCBpMThuKSB7XG4gICAgICByZXR1cm4gaTE4bi5kYXlOYW1lc1tkYXRlT2JqLmdldERheSgpXTtcbiAgICB9LFxuICAgIE06IGZ1bmN0aW9uKGRhdGVPYmopIHtcbiAgICAgIHJldHVybiBkYXRlT2JqLmdldE1vbnRoKCkgKyAxO1xuICAgIH0sXG4gICAgTU06IGZ1bmN0aW9uKGRhdGVPYmopIHtcbiAgICAgIHJldHVybiBwYWQoZGF0ZU9iai5nZXRNb250aCgpICsgMSk7XG4gICAgfSxcbiAgICBNTU06IGZ1bmN0aW9uKGRhdGVPYmosIGkxOG4pIHtcbiAgICAgIHJldHVybiBpMThuLm1vbnRoTmFtZXNTaG9ydFtkYXRlT2JqLmdldE1vbnRoKCldO1xuICAgIH0sXG4gICAgTU1NTTogZnVuY3Rpb24oZGF0ZU9iaiwgaTE4bikge1xuICAgICAgcmV0dXJuIGkxOG4ubW9udGhOYW1lc1tkYXRlT2JqLmdldE1vbnRoKCldO1xuICAgIH0sXG4gICAgeXk6IGZ1bmN0aW9uKGRhdGVPYmopIHtcbiAgICAgIHJldHVybiBTdHJpbmcoZGF0ZU9iai5nZXRGdWxsWWVhcigpKS5zdWJzdHIoMik7XG4gICAgfSxcbiAgICB5eXl5OiBmdW5jdGlvbihkYXRlT2JqKSB7XG4gICAgICByZXR1cm4gZGF0ZU9iai5nZXRGdWxsWWVhcigpO1xuICAgIH0sXG4gICAgaDogZnVuY3Rpb24oZGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGRhdGVPYmouZ2V0SG91cnMoKSAlIDEyIHx8IDEyO1xuICAgIH0sXG4gICAgaGg6IGZ1bmN0aW9uKGRhdGVPYmopIHtcbiAgICAgIHJldHVybiBwYWQoZGF0ZU9iai5nZXRIb3VycygpICUgMTIgfHwgMTIpO1xuICAgIH0sXG4gICAgSDogZnVuY3Rpb24oZGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGRhdGVPYmouZ2V0SG91cnMoKTtcbiAgICB9LFxuICAgIEhIOiBmdW5jdGlvbihkYXRlT2JqKSB7XG4gICAgICByZXR1cm4gcGFkKGRhdGVPYmouZ2V0SG91cnMoKSk7XG4gICAgfSxcbiAgICBtOiBmdW5jdGlvbihkYXRlT2JqKSB7XG4gICAgICByZXR1cm4gZGF0ZU9iai5nZXRNaW51dGVzKCk7XG4gICAgfSxcbiAgICBtbTogZnVuY3Rpb24oZGF0ZU9iaikge1xuICAgICAgcmV0dXJuIHBhZChkYXRlT2JqLmdldE1pbnV0ZXMoKSk7XG4gICAgfSxcbiAgICBzOiBmdW5jdGlvbihkYXRlT2JqKSB7XG4gICAgICByZXR1cm4gZGF0ZU9iai5nZXRTZWNvbmRzKCk7XG4gICAgfSxcbiAgICBzczogZnVuY3Rpb24oZGF0ZU9iaikge1xuICAgICAgcmV0dXJuIHBhZChkYXRlT2JqLmdldFNlY29uZHMoKSk7XG4gICAgfSxcbiAgICBTOiBmdW5jdGlvbihkYXRlT2JqKSB7XG4gICAgICByZXR1cm4gTWF0aC5yb3VuZChkYXRlT2JqLmdldE1pbGxpc2Vjb25kcygpIC8gMTAwKTtcbiAgICB9LFxuICAgIFNTOiBmdW5jdGlvbihkYXRlT2JqKSB7XG4gICAgICByZXR1cm4gcGFkKE1hdGgucm91bmQoZGF0ZU9iai5nZXRNaWxsaXNlY29uZHMoKSAvIDEwKSwgMik7XG4gICAgfSxcbiAgICBTU1M6IGZ1bmN0aW9uKGRhdGVPYmopIHtcbiAgICAgIHJldHVybiBwYWQoZGF0ZU9iai5nZXRNaWxsaXNlY29uZHMoKSwgMyk7XG4gICAgfSxcbiAgICBhOiBmdW5jdGlvbihkYXRlT2JqLCBpMThuKSB7XG4gICAgICByZXR1cm4gZGF0ZU9iai5nZXRIb3VycygpIDwgMTIgPyBpMThuLmFtUG1bMF0gOiBpMThuLmFtUG1bMV07XG4gICAgfSxcbiAgICBBOiBmdW5jdGlvbihkYXRlT2JqLCBpMThuKSB7XG4gICAgICByZXR1cm4gZGF0ZU9iai5nZXRIb3VycygpIDwgMTIgPyBpMThuLmFtUG1bMF0udG9VcHBlckNhc2UoKSA6IGkxOG4uYW1QbVsxXS50b1VwcGVyQ2FzZSgpO1xuICAgIH0sXG4gICAgWlo6IGZ1bmN0aW9uKGRhdGVPYmopIHtcbiAgICAgIHZhciBvID0gZGF0ZU9iai5nZXRUaW1lem9uZU9mZnNldCgpO1xuICAgICAgcmV0dXJuIChvID4gMCA/ICctJyA6ICcrJykgKyBwYWQoTWF0aC5mbG9vcihNYXRoLmFicyhvKSAvIDYwKSAqIDEwMCArIE1hdGguYWJzKG8pICUgNjAsIDQpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgcGFyc2VGbGFncyA9IHtcbiAgICBkOiBbdHdvRGlnaXRzLCBmdW5jdGlvbiAoZCwgdikge1xuICAgICAgZC5kYXkgPSB2O1xuICAgIH1dLFxuICAgIE06IFt0d29EaWdpdHMsIGZ1bmN0aW9uIChkLCB2KSB7XG4gICAgICBkLm1vbnRoID0gdiAtIDE7XG4gICAgfV0sXG4gICAgeXk6IFt0d29EaWdpdHMsIGZ1bmN0aW9uIChkLCB2KSB7XG4gICAgICB2YXIgZGEgPSBuZXcgRGF0ZSgpLCBjZW50ID0gKygnJyArIGRhLmdldEZ1bGxZZWFyKCkpLnN1YnN0cigwLCAyKTtcbiAgICAgIGQueWVhciA9ICcnICsgKHYgPiA2OCA/IGNlbnQgLSAxIDogY2VudCkgKyB2O1xuICAgIH1dLFxuICAgIGg6IFt0d29EaWdpdHMsIGZ1bmN0aW9uIChkLCB2KSB7XG4gICAgICBkLmhvdXIgPSB2O1xuICAgIH1dLFxuICAgIG06IFt0d29EaWdpdHMsIGZ1bmN0aW9uIChkLCB2KSB7XG4gICAgICBkLm1pbnV0ZSA9IHY7XG4gICAgfV0sXG4gICAgczogW3R3b0RpZ2l0cywgZnVuY3Rpb24gKGQsIHYpIHtcbiAgICAgIGQuc2Vjb25kID0gdjtcbiAgICB9XSxcbiAgICB5eXl5OiBbZm91ckRpZ2l0cywgZnVuY3Rpb24gKGQsIHYpIHtcbiAgICAgIGQueWVhciA9IHY7XG4gICAgfV0sXG4gICAgUzogWy9cXGQvLCBmdW5jdGlvbiAoZCwgdikge1xuICAgICAgZC5taWxsaXNlY29uZCA9IHYgKiAxMDA7XG4gICAgfV0sXG4gICAgU1M6IFsvXFxkezJ9LywgZnVuY3Rpb24gKGQsIHYpIHtcbiAgICAgIGQubWlsbGlzZWNvbmQgPSB2ICogMTA7XG4gICAgfV0sXG4gICAgU1NTOiBbdGhyZWVEaWdpdHMsIGZ1bmN0aW9uIChkLCB2KSB7XG4gICAgICBkLm1pbGxpc2Vjb25kID0gdjtcbiAgICB9XSxcbiAgICBEOiBbdHdvRGlnaXRzLCBub29wXSxcbiAgICBkZGQ6IFt3b3JkLCBub29wXSxcbiAgICBNTU06IFt3b3JkLCBtb250aFVwZGF0ZSgnbW9udGhOYW1lc1Nob3J0JyldLFxuICAgIE1NTU06IFt3b3JkLCBtb250aFVwZGF0ZSgnbW9udGhOYW1lcycpXSxcbiAgICBhOiBbd29yZCwgZnVuY3Rpb24gKGQsIHYsIGkxOG4pIHtcbiAgICAgIHZhciB2YWwgPSB2LnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAodmFsID09PSBpMThuLmFtUG1bMF0pIHtcbiAgICAgICAgZC5pc1BtID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKHZhbCA9PT0gaTE4bi5hbVBtWzFdKSB7XG4gICAgICAgIGQuaXNQbSA9IHRydWU7XG4gICAgICB9XG4gICAgfV0sXG4gICAgWlo6IFsvW1xcK1xcLV1cXGRcXGQ6P1xcZFxcZC8sIGZ1bmN0aW9uIChkLCB2KSB7XG4gICAgICB2YXIgcGFydHMgPSAodiArICcnKS5tYXRjaCgvKFtcXCtcXC1dfFxcZFxcZCkvZ2kpLCBtaW51dGVzO1xuXG4gICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgbWludXRlcyA9ICsocGFydHNbMV0gKiA2MCkgKyBwYXJzZUludChwYXJ0c1syXSwgMTApO1xuICAgICAgICBkLnRpbWV6b25lT2Zmc2V0ID0gcGFydHNbMF0gPT09ICcrJyA/IG1pbnV0ZXMgOiAtbWludXRlcztcbiAgICAgIH1cbiAgICB9XVxuICB9O1xuICBwYXJzZUZsYWdzLkREID0gcGFyc2VGbGFncy5EO1xuICBwYXJzZUZsYWdzLmRkZGQgPSBwYXJzZUZsYWdzLmRkZDtcbiAgcGFyc2VGbGFncy5EbyA9IHBhcnNlRmxhZ3MuZGQgPSBwYXJzZUZsYWdzLmQ7XG4gIHBhcnNlRmxhZ3MubW0gPSBwYXJzZUZsYWdzLm07XG4gIHBhcnNlRmxhZ3MuaGggPSBwYXJzZUZsYWdzLkggPSBwYXJzZUZsYWdzLkhIID0gcGFyc2VGbGFncy5oO1xuICBwYXJzZUZsYWdzLk1NID0gcGFyc2VGbGFncy5NO1xuICBwYXJzZUZsYWdzLnNzID0gcGFyc2VGbGFncy5zO1xuICBwYXJzZUZsYWdzLkEgPSBwYXJzZUZsYWdzLmE7XG5cblxuICAvLyBTb21lIGNvbW1vbiBmb3JtYXQgc3RyaW5nc1xuICBmZWNoYS5tYXNrcyA9IHtcbiAgICAnZGVmYXVsdCc6ICdkZGQgTU1NIGRkIHl5eXkgSEg6bW06c3MnLFxuICAgIHNob3J0RGF0ZTogJ00vRC95eScsXG4gICAgbWVkaXVtRGF0ZTogJ01NTSBkLCB5eXl5JyxcbiAgICBsb25nRGF0ZTogJ01NTU0gZCwgeXl5eScsXG4gICAgZnVsbERhdGU6ICdkZGRkLCBNTU1NIGQsIHl5eXknLFxuICAgIHNob3J0VGltZTogJ0hIOm1tJyxcbiAgICBtZWRpdW1UaW1lOiAnSEg6bW06c3MnLFxuICAgIGxvbmdUaW1lOiAnSEg6bW06c3MuU1NTJ1xuICB9O1xuXG4gIC8qKipcbiAgICogRm9ybWF0IGEgZGF0ZVxuICAgKiBAbWV0aG9kIGZvcm1hdFxuICAgKiBAcGFyYW0ge0RhdGV8bnVtYmVyfSBkYXRlT2JqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtYXNrIEZvcm1hdCBvZiB0aGUgZGF0ZSwgaS5lLiAnbW0tZGQteXknIG9yICdzaG9ydERhdGUnXG4gICAqL1xuICBmZWNoYS5mb3JtYXQgPSBmdW5jdGlvbiAoZGF0ZU9iaiwgbWFzaywgaTE4blNldHRpbmdzKSB7XG4gICAgdmFyIGkxOG4gPSBpMThuU2V0dGluZ3MgfHwgZmVjaGEuaTE4bjtcblxuICAgIGlmICh0eXBlb2YgZGF0ZU9iaiA9PT0gJ251bWJlcicpIHtcbiAgICAgIGRhdGVPYmogPSBuZXcgRGF0ZShkYXRlT2JqKTtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGRhdGVPYmopICE9PSAnW29iamVjdCBEYXRlXScgfHwgaXNOYU4oZGF0ZU9iai5nZXRUaW1lKCkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgRGF0ZSBpbiBmZWNoYS5mb3JtYXQnKTtcbiAgICB9XG5cbiAgICBtYXNrID0gZmVjaGEubWFza3NbbWFza10gfHwgbWFzayB8fCBmZWNoYS5tYXNrc1snZGVmYXVsdCddO1xuXG4gICAgcmV0dXJuIG1hc2sucmVwbGFjZSh0b2tlbiwgZnVuY3Rpb24gKCQwKSB7XG4gICAgICByZXR1cm4gJDAgaW4gZm9ybWF0RmxhZ3MgPyBmb3JtYXRGbGFnc1skMF0oZGF0ZU9iaiwgaTE4bikgOiAkMC5zbGljZSgxLCAkMC5sZW5ndGggLSAxKTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogUGFyc2UgYSBkYXRlIHN0cmluZyBpbnRvIGFuIG9iamVjdCwgY2hhbmdlcyAtIGludG8gL1xuICAgKiBAbWV0aG9kIHBhcnNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRlU3RyIERhdGUgc3RyaW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtYXQgRGF0ZSBwYXJzZSBmb3JtYXRcbiAgICogQHJldHVybnMge0RhdGV8Ym9vbGVhbn1cbiAgICovXG4gIGZlY2hhLnBhcnNlID0gZnVuY3Rpb24gKGRhdGVTdHIsIGZvcm1hdCwgaTE4blNldHRpbmdzKSB7XG4gICAgdmFyIGkxOG4gPSBpMThuU2V0dGluZ3MgfHwgZmVjaGEuaTE4bjtcblxuICAgIGlmICh0eXBlb2YgZm9ybWF0ICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGZvcm1hdCBpbiBmZWNoYS5wYXJzZScpO1xuICAgIH1cblxuICAgIGZvcm1hdCA9IGZlY2hhLm1hc2tzW2Zvcm1hdF0gfHwgZm9ybWF0O1xuXG4gICAgLy8gQXZvaWQgcmVndWxhciBleHByZXNzaW9uIGRlbmlhbCBvZiBzZXJ2aWNlLCBmYWlsIGVhcmx5IGZvciByZWFsbHkgbG9uZyBzdHJpbmdzXG4gICAgLy8gaHR0cHM6Ly93d3cub3dhc3Aub3JnL2luZGV4LnBocC9SZWd1bGFyX2V4cHJlc3Npb25fRGVuaWFsX29mX1NlcnZpY2VfLV9SZURvU1xuICAgIGlmIChkYXRlU3RyLmxlbmd0aCA+IDEwMDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgaXNWYWxpZCA9IHRydWU7XG4gICAgdmFyIGRhdGVJbmZvID0ge307XG4gICAgZm9ybWF0LnJlcGxhY2UodG9rZW4sIGZ1bmN0aW9uICgkMCkge1xuICAgICAgaWYgKHBhcnNlRmxhZ3NbJDBdKSB7XG4gICAgICAgIHZhciBpbmZvID0gcGFyc2VGbGFnc1skMF07XG4gICAgICAgIHZhciBpbmRleCA9IGRhdGVTdHIuc2VhcmNoKGluZm9bMF0pO1xuICAgICAgICBpZiAoIX5pbmRleCkge1xuICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYXRlU3RyLnJlcGxhY2UoaW5mb1swXSwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgaW5mb1sxXShkYXRlSW5mbywgcmVzdWx0LCBpMThuKTtcbiAgICAgICAgICAgIGRhdGVTdHIgPSBkYXRlU3RyLnN1YnN0cihpbmRleCArIHJlc3VsdC5sZW5ndGgpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGFyc2VGbGFnc1skMF0gPyAnJyA6ICQwLnNsaWNlKDEsICQwLmxlbmd0aCAtIDEpO1xuICAgIH0pO1xuXG4gICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICBpZiAoZGF0ZUluZm8uaXNQbSA9PT0gdHJ1ZSAmJiBkYXRlSW5mby5ob3VyICE9IG51bGwgJiYgK2RhdGVJbmZvLmhvdXIgIT09IDEyKSB7XG4gICAgICBkYXRlSW5mby5ob3VyID0gK2RhdGVJbmZvLmhvdXIgKyAxMjtcbiAgICB9IGVsc2UgaWYgKGRhdGVJbmZvLmlzUG0gPT09IGZhbHNlICYmICtkYXRlSW5mby5ob3VyID09PSAxMikge1xuICAgICAgZGF0ZUluZm8uaG91ciA9IDA7XG4gICAgfVxuXG4gICAgdmFyIGRhdGU7XG4gICAgaWYgKGRhdGVJbmZvLnRpbWV6b25lT2Zmc2V0ICE9IG51bGwpIHtcbiAgICAgIGRhdGVJbmZvLm1pbnV0ZSA9ICsoZGF0ZUluZm8ubWludXRlIHx8IDApIC0gK2RhdGVJbmZvLnRpbWV6b25lT2Zmc2V0O1xuICAgICAgZGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKGRhdGVJbmZvLnllYXIgfHwgdG9kYXkuZ2V0RnVsbFllYXIoKSwgZGF0ZUluZm8ubW9udGggfHwgMCwgZGF0ZUluZm8uZGF5IHx8IDEsXG4gICAgICAgIGRhdGVJbmZvLmhvdXIgfHwgMCwgZGF0ZUluZm8ubWludXRlIHx8IDAsIGRhdGVJbmZvLnNlY29uZCB8fCAwLCBkYXRlSW5mby5taWxsaXNlY29uZCB8fCAwKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGUgPSBuZXcgRGF0ZShkYXRlSW5mby55ZWFyIHx8IHRvZGF5LmdldEZ1bGxZZWFyKCksIGRhdGVJbmZvLm1vbnRoIHx8IDAsIGRhdGVJbmZvLmRheSB8fCAxLFxuICAgICAgICBkYXRlSW5mby5ob3VyIHx8IDAsIGRhdGVJbmZvLm1pbnV0ZSB8fCAwLCBkYXRlSW5mby5zZWNvbmQgfHwgMCwgZGF0ZUluZm8ubWlsbGlzZWNvbmQgfHwgMCk7XG4gICAgfVxuICAgIHJldHVybiBkYXRlO1xuICB9O1xuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmVjaGE7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBmZWNoYTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBtYWluLmZlY2hhID0gZmVjaGE7XG4gIH1cbn0pKHRoaXMpO1xuIl19
