// ==========================================================================
// CHECKBOX STYLES
// ==========================================================================
// BEVM STRUCTURE: checkbox, checkbox__input, checkbox__label

// PSEUDO CLASSES 
// ==========================================================================
%checkbox {
    // Base checkbox rules  
    width: 100%;
    line-height: 0;
}

%checkbox__input {
    // Base checkbox input rules
    display: none;

    // input state determines label styles  
    &:checked + .checkbox__label {
        > span {
            color: $pe-color-grey;
        }

        &::before {
            opacity: 1;
        }

        &::after {
            border-color: nth($pe-primary-color-list, 3);            
            background-color: nth($pe-greyscale-color-list, 3);
        }
    }

    &:disabled + .checkbox__label {
        opacity: 0.3;
    }  
}

%checkbox__label {
    display: inline-block;
    position: relative;        
    cursor: pointer;
    vertical-align: top;

    > span {
        color: nth($pe-greyscale-color-list, 4);
    }

    &:hover {
        > span {
            color: $pe-color-grey;
        }
    }

    &::before, 
    &::after {
        display: inline-block;
        position: absolute;               
        padding: 0;            
        vertical-align: middle;
    }

    &::before {        
        // Before is the check mark
        top: 0;        
        left: 0;
        transition-duration: .25s;
        transition-property: opacity;
        transition-timing-function: $timing-function;
        color: nth($pe-primary-color-list, 3);
        text-align: center;
        text-shadow: 0 1px 1px nth($pe-greyscale-color-list, 1);
        content: "\2713";
        opacity: 0;
        z-index: 1;                        
    }

    &::after {            
        // After is the black box
        top: 0;
        left: 0;
        transition-duration: .25s;
        transition-property: border-width, border-color, background, box-shadow;
        transition-timing-function: $timing-function;        
        border-style: solid; 
        border-color: nth($pe-greyscale-color-list, 5); 
        background-color: nth($pe-greyscale-color-list, 4);        
        content: "\00a0";
        z-index: 0;
        box-sizing: border-box;
    }
}

// MIXINS
// ==========================================================================

@mixin checkbox-input-size($size) {
    &:checked + .checkbox__label {
        &::after {
            @if $size <= ($pe-base-fontsize * 1.5) {
                border-width: 4px;  
            } @else if $size > ($pe-base-fontsize * 2) {
                border-width: 8px;
            } @else {            
                border-width: 6px;
            }
            box-shadow: inset 0 1px $size / 2 nth($pe-greyscale-color-list, 1);
        }
    }
}

@mixin checkbox-label-size ($size) {    
    width: $size;
    height: $size;
    line-height: rem($size * 1);

    > span {
        margin-left: $size + 10px;
        @if $size <= ($pe-base-fontsize * 1.5) {
            @include font-sizing-paragraph(); 
        } @else if $size > ($pe-base-fontsize * 2) {  
            @include font-sizing-h4(); 
        } @else {
            @include font-sizing-h6();
        }  
    }

    &::before, 
    &::after {            
        width: $size;
        height: $size;            
    }

    &::before {        
        // Before is the check mark        
        @if $size <= ($pe-base-fontsize * 1.5) {
            @include font-sizing-sub-paragraph();
            transform: scale(1.2); 
        } @else if $size > ($pe-base-fontsize * 2) {  
            @include font-sizing-h4(); 
        } @else {
            @include font-sizing-h6();
        }                               
    }

    &::after {
        @if $size <= ($pe-base-fontsize * 1.5) {
            border-width: 2px; 
            border-radius: 1px; 
        } @else if $size > ($pe-base-fontsize * 2) {
            border-width: 4px;
            border-radius: 1px;
        } @else {            
            border-width: 3px;
            border-radius: 1px;
        }
        box-shadow: inset 0 1px $size / 2 nth($pe-greyscale-color-list, 2);
    }

}


// MAIN CLASSES
// ========================================================================== 
.checkbox {
    // Base checkbox 
    @extend %checkbox;

    .checkbox__input {
        @extend %checkbox__input;
        @include checkbox-input-size(32px);
    }

    .checkbox__label {
        @extend %checkbox__label;
        @include checkbox-label-size(32px);
    }     
}

// MODIFIER CLASSES 
// ==========================================================================
// sass-lint:disable class-name-format

// Size Modifiers
.checkbox_size-small {
    .checkbox__input {
        @include checkbox-input-size(24px);
    }

    .checkbox__label {        
        @include checkbox-label-size(24px);
    } 
}

.checkbox_size-large {
    .checkbox__input {
        @include checkbox-input-size(48px);
    }

    .checkbox__label {        
        @include checkbox-label-size(48px);
    } 
}

